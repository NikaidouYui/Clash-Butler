name: Test Email Notification

on:
  workflow_dispatch: # ä»…æ”¯æŒæ‰‹åŠ¨è§¦å‘

jobs:
  test-email:
    name: Test Email Configuration
    runs-on: ubuntu-latest
    
    steps:
      - name: Send test email
        uses: dawidd6/action-send-mail@v3
        with:
          server_address: ${{ secrets.SMTP_SERVER }}
          server_port: ${{ secrets.SMTP_PORT }}
          username: ${{ secrets.SMTP_USERNAME }}
          password: ${{ secrets.SMTP_PASSWORD }}
          subject: "ğŸ§ª Clash Butler é‚®ä»¶é…ç½®æµ‹è¯•"
          to: ${{ secrets.EMAIL_TO }}
          from: ${{ secrets.EMAIL_FROM }}
          html_body: |
            <h2>ğŸ‰ é‚®ä»¶é…ç½®æµ‹è¯•æˆåŠŸï¼</h2>
            <p>æ­å–œï¼æ‚¨çš„ Clash Butler é‚®ä»¶é€šçŸ¥é…ç½®å·²æ­£ç¡®è®¾ç½®ã€‚</p>
            
            <h3>ğŸ“‹ é…ç½®ä¿¡æ¯</h3>
            <ul>
              <li><strong>SMTP æœåŠ¡å™¨:</strong> ${{ secrets.SMTP_SERVER }}</li>
              <li><strong>SMTP ç«¯å£:</strong> ${{ secrets.SMTP_PORT }}</li>
              <li><strong>å‘é€æ–¹:</strong> ${{ secrets.EMAIL_FROM }}</li>
              <li><strong>æ¥æ”¶æ–¹:</strong> ${{ secrets.EMAIL_TO }}</li>
            </ul>
            
            <h3>ğŸš€ ä¸‹ä¸€æ­¥</h3>
            <p>ç°åœ¨æ‚¨å¯ä»¥ï¼š</p>
            <ol>
              <li>ç­‰å¾…æ¯æ—¥å®šæ—¶ä»»åŠ¡è‡ªåŠ¨è¿è¡Œ</li>
              <li>æˆ–è€…æ‰‹åŠ¨è§¦å‘ "Daily Clash Butler Update" å·¥ä½œæµè¿›è¡Œæµ‹è¯•</li>
            </ol>
            
            <hr>
            <p><em>æµ‹è¯•æ—¶é—´: ${{ github.event.head_commit.timestamp }}</em></p>
            <p><em>ä»“åº“åœ°å€: <a href="${{ github.server_url }}/${{ github.repository }}">${{ github.repository }}</a></em></p>